"use strict";(self.webpackChunkakita_docs=self.webpackChunkakita_docs||[]).push([[866],{3905:function(t,e,n){n.d(e,{Zo:function(){return c},kt:function(){return y}});var i=n(7294);function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function a(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function o(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?a(Object(n),!0).forEach((function(e){r(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function s(t,e){if(null==t)return{};var n,i,r=function(t,e){if(null==t)return{};var n,i,r={},a=Object.keys(t);for(i=0;i<a.length;i++)n=a[i],e.indexOf(n)>=0||(r[n]=t[n]);return r}(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}var l=i.createContext({}),u=function(t){var e=i.useContext(l),n=e;return t&&(n="function"==typeof t?t(e):o(o({},e),t)),n},c=function(t){var e=u(t.components);return i.createElement(l.Provider,{value:e},t.children)},p="mdxType",d={inlineCode:"code",wrapper:function(t){var e=t.children;return i.createElement(i.Fragment,{},e)}},m=i.forwardRef((function(t,e){var n=t.components,r=t.mdxType,a=t.originalType,l=t.parentName,c=s(t,["components","mdxType","originalType","parentName"]),p=u(n),m=r,y=p["".concat(l,".").concat(m)]||p[m]||d[m]||a;return n?i.createElement(y,o(o({ref:e},c),{},{components:n})):i.createElement(y,o({ref:e},c))}));function y(t,e){var n=arguments,r=e&&e.mdxType;if("string"==typeof t||r){var a=n.length,o=new Array(a);o[0]=m;var s={};for(var l in e)hasOwnProperty.call(e,l)&&(s[l]=e[l]);s.originalType=t,s[p]="string"==typeof t?t:r,o[1]=s;for(var u=2;u<a;u++)o[u]=n[u];return i.createElement.apply(null,o)}return i.createElement.apply(null,n)}m.displayName="MDXCreateElement"},5241:function(t,e,n){n.r(e),n.d(e,{assets:function(){return c},contentTitle:function(){return l},default:function(){return m},frontMatter:function(){return s},metadata:function(){return u},toc:function(){return p}});var i=n(3117),r=n(102),a=(n(7294),n(3905)),o=["components"],s={title:"UI State"},l=void 0,u={unversionedId:"ui",id:"ui",title:"UI State",description:"Akita recommends separating the Domain State from the UI State. Domain State is the state of your application in the server side, while the UI state is more along the lines of the current time based on the user\u2019s machine, which tab is active tab, or whether a drop-down is open.",source:"@site/docs/ui.mdx",sourceDirName:".",slug:"/ui",permalink:"/akita/docs/ui",draft:!1,editUrl:"https://github.com/salesforce/akita/edit/master/docs/docs/ui.mdx",tags:[],version:"current",frontMatter:{title:"UI State"},sidebar:"docs",previous:{title:"Sorting",permalink:"/akita/docs/entities/sorting"},next:{title:"Transactions",permalink:"/akita/docs/transactions"}},c={},p=[{value:"Global UI State",id:"global-ui-state",level:2},{value:"Entity UI State",id:"entity-ui-state",level:2},{value:"Initial Entity State",id:"initial-entity-state",level:3}],d={toc:p};function m(t){var e=t.components,n=(0,r.Z)(t,o);return(0,a.kt)("wrapper",(0,i.Z)({},d,n,{components:e,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"Akita recommends separating the Domain State from the UI State. Domain State is the state of your application in the server side, while the UI state is more along the lines of the current time based on the user\u2019s machine, which tab is active tab, or whether a drop-down is open."),(0,a.kt)("p",null,"Here are two ways to manage the UI state:"),(0,a.kt)("h2",{id:"global-ui-state"},"Global UI State"),(0,a.kt)("p",null,"When you have a global UI state for a specific store, you can put the state under a ui key. "),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-ts",metastring:'title="todos.store.ts"',title:'"todos.store.ts"'},"export interface TodosState extends EntityState<Todo, number> {\n  ui: {\n    filter: VISIBILITY_FILTER;\n  };\n}\n\nconst initialState = {\n  ui: { filter: VISIBILITY_FILTER.SHOW_ALL }\n};\n\n@StoreConfig({ name: 'todos' })\nexport class TodosStore extends EntityStore<TodosState> {\n  constructor() {\n    super(initialState);\n  }\n  \n  updateFilter(filter: VISIBILITY_FILTER) {\n    this.update({ ui: { filter } } )\n  }\n}\n")),(0,a.kt)("p",null,"And create a selector in the query:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-ts",metastring:'title="todos.query.ts"',title:'"todos.query.ts"'},"export class TodosQuery extends QueryEntity<TodosState> {\n  selectVisibilityFilter$ = this.select(state => state.ui.filter);\n  \n  constructor(protected store: TodosStore) {\n    super(store);\n  }\n}\n")),(0,a.kt)("h2",{id:"entity-ui-state"},"Entity UI State"),(0,a.kt)("p",null,"There are times when we need to have an entity-based UI state. For example, we need to know if the current entity is open or loading, etc. For such cases, we've added a built-in UI store and an accompanying UI query that you can create on demand."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-ts",metastring:'title="movies.store.ts"',title:'"movies.store.ts"'},"import { \n  EntityState, \n  EntityStore, \n  EntityUIStore, \n  StoreConfig } \nfrom '@datorama/akita';\n\nexport type MovieUI = {\n  isOpen: boolean;\n  isLoading: boolean;\n}\n\nexport type Movie = { id: number, title: string }\n\nexport interface MoviesState extends EntityState<Movie> {}\nexport interface MoviesUIState extends EntityState<MovieUI> {}\n\n@StoreConfig({ name: 'movies' })\nexport class MoviesStore extends EntityStore<MoviesState> {\n  ui: EntityUIStore<MoviesUIState>;\n\n  constructor() {\n    super();\n    this.createUIStore();\n  }\n}\n")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-ts",metastring:'title="movies.query.ts"',title:'"movies.query.ts"'},"import { EntityUIQuery, ID, QueryEntity } from '@datorama/akita';\n\nexport class MoviesQuery extends QueryEntity<MoviesState> {\n  ui: EntityUIQuery<MoviesUIState>;\n\n  constructor(protected store: MoviesStore) {\n    super(store);\n    this.createUIQuery();\n  }\n}\n")),(0,a.kt)("p",null,"The only thing we need to do is to add the ui property, passing the entity UI interface, and call the ",(0,a.kt)("inlineCode",{parentName:"p"},"createUIStore()")," in the store and ",(0,a.kt)("inlineCode",{parentName:"p"},"createUIQuery()")," in the query."),(0,a.kt)("p",null,"With this setup, Akita will instantiate a new ",(0,a.kt)("inlineCode",{parentName:"p"},"EntityStore")," and ",(0,a.kt)("inlineCode",{parentName:"p"},"EntityQuery")," under the ",(0,a.kt)("inlineCode",{parentName:"p"},"ui")," property, that will be responsible for managing the entity UI state."),(0,a.kt)("admonition",{type:"tip"},(0,a.kt)("p",{parentName:"admonition"},"If you\u2019re working with Akita\u2019s dev-tools, you\u2019ll see the new store prefixed with the UI keyword.")),(0,a.kt)("h3",{id:"initial-entity-state"},"Initial Entity State"),(0,a.kt)("p",null,"It's possible to pass an initial entity state in the UI store:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-ts",metastring:'{8,12} title="movies.store.ts"',"{8,12}":!0,title:'"movies.store.ts"'},"@StoreConfig({ name: 'movies' })\nexport class MoviesStore extends EntityStore<MoviesState> {\n  ui: EntityUIStore<MoviesUIState>;\n\n  constructor() {\n    super();\n    const defaults = { isLoading: false, isOpen: true };\n    this.createUIStore().setInitialEntityState(defaults);\n  }\n}\n")),(0,a.kt)("p",null,"Or if you need the entity object:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-ts",metastring:'{7,8} title="movies.store.ts"',"{7,8}":!0,title:'"movies.store.ts"'},"@StoreConfig({ name: 'movies' })\nexport class MoviesStore extends EntityStore<MoviesState> {\n  // Note the ! modifier, as defaults are assigned via side-effect\n  ui!: EntityUIStore<MoviesUIState>;\n\n  constructor() {\n    const defaults = entity => ({ isLoading: false, isOpen: true });\n    this.createUIStore().setInitialEntityState(defaults);\n  }\n}\n")),(0,a.kt)("p",null,"With this setup, each time we create a new entity for the encompassing entity store, by calling the ",(0,a.kt)("inlineCode",{parentName:"p"},"set()")," or ",(0,a.kt)("inlineCode",{parentName:"p"},"add()")," methods, Akita automatically generates an accompanying UI entity for this entity with the values we specified. "),(0,a.kt)("p",null,"In addition, whenever we ",(0,a.kt)("inlineCode",{parentName:"p"},"remove")," the related entity from the model, Akita automatically removes the UI entity associated with it."))}m.isMDXComponent=!0}}]);