"use strict";(self.webpackChunkakita_docs=self.webpackChunkakita_docs||[]).push([[1303],{3905:function(e,t,r){r.d(t,{Zo:function(){return c},kt:function(){return y}});var a=r(7294);function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function u(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r,a,n={},o=Object.keys(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var l=a.createContext({}),i=function(e){var t=a.useContext(l),r=t;return e&&(r="function"==typeof e?e(t):s(s({},t),e)),r},c=function(e){var t=i(e.components);return a.createElement(l.Provider,{value:t},e.children)},p="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var r=e.components,n=e.mdxType,o=e.originalType,l=e.parentName,c=u(e,["components","mdxType","originalType","parentName"]),p=i(r),m=n,y=p["".concat(l,".").concat(m)]||p[m]||d[m]||o;return r?a.createElement(y,s(s({ref:t},c),{},{components:r})):a.createElement(y,s({ref:t},c))}));function y(e,t){var r=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var o=r.length,s=new Array(o);s[0]=m;var u={};for(var l in t)hasOwnProperty.call(t,l)&&(u[l]=t[l]);u.originalType=e,u[p]="string"==typeof e?e:n,s[1]=u;for(var i=2;i<o;i++)s[i]=r[i];return a.createElement.apply(null,s)}return a.createElement.apply(null,r)}m.displayName="MDXCreateElement"},6948:function(e,t,r){r.r(t),r.d(t,{assets:function(){return c},contentTitle:function(){return l},default:function(){return m},frontMatter:function(){return u},metadata:function(){return i},toc:function(){return p}});var a=r(3117),n=r(102),o=(r(7294),r(3905)),s=["components"],u={title:"Angular Router Store"},l=void 0,i={unversionedId:"angular/router",id:"angular/router",title:"Angular Router Store",description:"Bindings to connect Angular router to Akita store.",source:"@site/docs/angular/router.mdx",sourceDirName:"angular",slug:"/angular/router",permalink:"/akita/docs/angular/router",draft:!1,editUrl:"https://github.com/salesforce/akita/edit/master/docs/docs/angular/router.mdx",tags:[],version:"current",frontMatter:{title:"Angular Router Store"},sidebar:"docs",previous:{title:"Effects",permalink:"/akita/docs/angular/effects"},next:{title:"Unit Tests",permalink:"/akita/docs/angular/tests"}},c={},p=[{value:"<code>selectParams</code>",id:"selectparams",level:3},{value:"<code>getParams</code>",id:"getparams",level:3},{value:"<code>selectQueryParams</code>",id:"selectqueryparams",level:3},{value:"<code>getQueryParams</code>",id:"getqueryparams",level:3},{value:"<code>selectFragment</code>",id:"selectfragment",level:3},{value:"<code>getFragment</code>",id:"getfragment",level:3},{value:"<code>selectData</code>",id:"selectdata",level:3},{value:"<code>getData</code>",id:"getdata",level:3},{value:"<code>selectNavigationExtras</code>",id:"selectnavigationextras",level:3},{value:"<code>getNavigationExtras</code>",id:"getnavigationextras",level:3},{value:"<code>selectNavigationCancel</code>",id:"selectnavigationcancel",level:3},{value:"<code>selectNavigationError</code>",id:"selectnavigationerror",level:3},{value:"Lazy Load Modules",id:"lazy-load-modules",level:2}],d={toc:p};function m(e){var t=e.components,r=(0,n.Z)(e,s);return(0,o.kt)("wrapper",(0,a.Z)({},d,r,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"Bindings to connect Angular router to Akita store.")),(0,o.kt)("p",null,"To get started, install the ",(0,o.kt)("inlineCode",{parentName:"p"},"@datorama/akita-ng-router-store")," package and add to the ",(0,o.kt)("inlineCode",{parentName:"p"},"AppModule")," the Akita\u2019s devtools modules:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts",metastring:'title="app.module.ts"',title:'"app.module.ts"'},"import { AkitaNgDevtools } from '@datorama/akita-ngdevtools';\nimport { \n  AkitaNgRouterStoreModule \n} from '@datorama/akita-ng-router-store';\n\n\u200b@NgModule({ \nimports: [\n  AkitaNgRouterStoreModule,\n  environment.production ? [] : AkitaNgDevtools.forRoot()\n})\nexport class AppModule {\n}\n")),(0,o.kt)("p",null,"With this setup, you'll get two things:"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"You'll see the Router actions in Redux devtools."),(0,o.kt)("li",{parentName:"ol"},"A unique queries selectors to query the router state:")),(0,o.kt)("h3",{id:"selectparams"},(0,o.kt)("inlineCode",{parentName:"h3"},"selectParams")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts"},"import { RouterQuery } from '@datorama/akita-ng-router-store';\n\nexport class ArticlesQuery extends QueryEntity<ArticlesState> {\n   constructor(protected store: ArticlesStore, \n              private routerQuery: RouterQuery) {\n     routerQuery.selectParams().subscribe();\n     routerQuery.selectParams('id').subscribe();\n     routerQuery.selectParams(['id', 'type']).subscribe();\n   }\n }\n")),(0,o.kt)("h3",{id:"getparams"},(0,o.kt)("inlineCode",{parentName:"h3"},"getParams")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts"},"import { RouterQuery } from '@datorama/akita-ng-router-store';\n\nexport class ArticlesQuery extends QueryEntity<ArticlesState> {\n   constructor(protected store: ArticlesStore, \n              private routerQuery: RouterQuery) {\n     const params = routerQuery.getParams();\n   }\n }\n")),(0,o.kt)("h3",{id:"selectqueryparams"},(0,o.kt)("inlineCode",{parentName:"h3"},"selectQueryParams")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts"},"import { RouterQuery } from '@datorama/akita-ng-router-store';\n\nexport class ArticlesQuery extends QueryEntity<ArticlesState> {\n   constructor(protected store: ArticlesStore, \n              private routerQuery: RouterQuery) {\n     routerQuery.selectQueryParams().subscribe();\n     routerQuery.selectQueryParams('id').subscribe();\n     routerQuery.selectQueryParams(['id', 'type']).subscribe();\n   }\n }\n")),(0,o.kt)("h3",{id:"getqueryparams"},(0,o.kt)("inlineCode",{parentName:"h3"},"getQueryParams")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts"},"import { RouterQuery } from '@datorama/akita-ng-router-store';\n\nexport class ArticlesQuery extends QueryEntity<ArticlesState> {\n   constructor(protected store: ArticlesStore, \n              private routerQuery: RouterQuery) {\n     const params = routerQuery.getQueryParams();\n   }\n }\n")),(0,o.kt)("h3",{id:"selectfragment"},(0,o.kt)("inlineCode",{parentName:"h3"},"selectFragment")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts"},"import { RouterQuery } from '@datorama/akita-ng-router-store';\n\nexport class ArticlesQuery extends QueryEntity<ArticlesState> {\n   constructor(protected store: ArticlesStore, \n              private routerQuery: RouterQuery) {\n     routerQuery.selectFragment().subscribe();\n     routerQuery.selectFragment('id').subscribe();\n     routerQuery.selectFragment(['id', 'type']).subscribe();\n   }\n }\n")),(0,o.kt)("h3",{id:"getfragment"},(0,o.kt)("inlineCode",{parentName:"h3"},"getFragment")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts"},"import { RouterQuery } from '@datorama/akita-ng-router-store';\n\nexport class ArticlesQuery extends QueryEntity<ArticlesState> {\n   constructor(protected store: ArticlesStore, \n              private routerQuery: RouterQuery) {\n     const fragment = routerQuery.getFragment();\n   }\n }\n")),(0,o.kt)("h3",{id:"selectdata"},(0,o.kt)("inlineCode",{parentName:"h3"},"selectData")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts"},"import { RouterQuery } from '@datorama/akita-ng-router-store';\n\nexport class ArticlesQuery extends QueryEntity<ArticlesState> {\n   constructor(protected store: ArticlesStore, \n              private routerQuery: RouterQuery) {\n     routerQuery.selectData().subscribe();\n     routerQuery.selectData('id').subscribe();\n     routerQuery.selectData(['id', 'type']).subscribe();\n   }\n }\n")),(0,o.kt)("h3",{id:"getdata"},(0,o.kt)("inlineCode",{parentName:"h3"},"getData")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts"},"import { RouterQuery } from '@datorama/akita-ng-router-store';\n\nexport class ArticlesQuery extends QueryEntity<ArticlesState> {\n   constructor(protected store: ArticlesStore, \n              private routerQuery: RouterQuery) {\n     const data = routerQuery.getData();\n   }\n }\n")),(0,o.kt)("h3",{id:"selectnavigationextras"},(0,o.kt)("inlineCode",{parentName:"h3"},"selectNavigationExtras")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts"},"import { RouterQuery } from '@datorama/akita-ng-router-store';\n\nexport class ArticlesQuery extends QueryEntity<ArticlesState> {\n   constructor(protected store: ArticlesStore, \n              private routerQuery: RouterQuery) {\n     routerQuery.selectNavigationExtras().subscribe();\n   }\n }\n")),(0,o.kt)("h3",{id:"getnavigationextras"},(0,o.kt)("inlineCode",{parentName:"h3"},"getNavigationExtras")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts"},"import { RouterQuery } from '@datorama/akita-ng-router-store';\n\nexport class ArticlesQuery extends QueryEntity<ArticlesState> {\n   constructor(protected store: ArticlesStore, \n              private routerQuery: RouterQuery) {\n     const extras = routerQuery.getNavigationExtras();\n   }\n }\n")),(0,o.kt)("h3",{id:"selectnavigationcancel"},(0,o.kt)("inlineCode",{parentName:"h3"},"selectNavigationCancel")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts"},"import { RouterQuery } from '@datorama/akita-ng-router-store';\n\nexport class ArticlesQuery extends QueryEntity<ArticlesState> {\n   constructor(protected store: ArticlesStore, \n              private routerQuery: RouterQuery) {\n     routerQuery.selectNavigationCancel().subscribe();\n   }\n }\n")),(0,o.kt)("h3",{id:"selectnavigationerror"},(0,o.kt)("inlineCode",{parentName:"h3"},"selectNavigationError")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts"},"import { RouterQuery } from '@datorama/akita-ng-router-store';\n\nexport class ArticlesQuery extends QueryEntity<ArticlesState> {\n   constructor(protected store: ArticlesStore, \n              private routerQuery: RouterQuery) {\n     routerQuery.selectNavigationError().subscribe();\n   }\n }\n")),(0,o.kt)("p",null,"For example, we can create a query that maps an id from the URL to an entity in the store:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts",metastring:'title="articles.query.ts"',title:'"articles.query.ts"'},"export class ArticlesQuery extends QueryEntity<ArticlesState> {\n  selectArticle$ = this.routerQuery.selectParams('id').pipe(\n     switchMap(id => this.selectEntity(id))\n  );\n\n  constructor(protected store: ArticlesStore, \n              private routerQuery: RouterQuery) {\n    super(store);\n  }\n}\n")),(0,o.kt)("p",null,"And use it in the component:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts",metastring:'title="articles.component.ts"',title:'"articles.component.ts"'},"@Component()\nexport class ArticleComponent {\n  article$ = this.articlesQuery.selectArticle$;\n  \n  constructor(private articlesQuery: ArticlesQuery) {}\n}\n")),(0,o.kt)("h2",{id:"lazy-load-modules"},"Lazy Load Modules"),(0,o.kt)("p",null,"To get the lazy modules routing params, add the following option to the ",(0,o.kt)("inlineCode",{parentName:"p"},"RouterModule.forRoot")," method:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts",metastring:'title="main.ts"',title:'"main.ts"'},"{\n  imports: [\n    RouterModule.forRoot(routes, { \n      paramsInheritanceStrategy: 'always' \n    })\n  ]\n}\n")))}m.isMDXComponent=!0}}]);