(window.webpackJsonp=window.webpackJsonp||[]).push([[39],{107:function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return u}));var a=n(0),i=n.n(a);function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},c=Object.keys(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var s=i.a.createContext({}),b=function(e){var t=i.a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},d=function(e){var t=b(e.components);return i.a.createElement(s.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return i.a.createElement(i.a.Fragment,{},t)}},v=i.a.forwardRef((function(e,t){var n=e.components,a=e.mdxType,c=e.originalType,r=e.parentName,s=l(e,["components","mdxType","originalType","parentName"]),d=b(n),v=a,u=d["".concat(r,".").concat(v)]||d[v]||p[v]||c;return n?i.a.createElement(u,o(o({ref:t},s),{},{components:n})):i.a.createElement(u,o({ref:t},s))}));function u(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var c=n.length,r=new Array(c);r[0]=v;var o={};for(var l in t)hasOwnProperty.call(t,l)&&(o[l]=t[l]);o.originalType=e,o.mdxType="string"==typeof e?e:a,r[1]=o;for(var s=2;s<c;s++)r[s]=n[s];return i.a.createElement.apply(null,r)}return i.a.createElement.apply(null,n)}v.displayName="MDXCreateElement"},98:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return r})),n.d(t,"metadata",(function(){return o})),n.d(t,"rightToc",(function(){return l})),n.d(t,"default",(function(){return b}));var a=n(2),i=n(6),c=(n(0),n(107)),r={title:"Active Entity"},o={unversionedId:"entities/active",id:"entities/active",isDocsHomePage:!1,title:"Active Entity",description:"The store supports having an active property, holding the active entity's id. This can prove to be very useful in cases where you want to interact with the entity that is currently active.",source:"@site/docs/entities/active.mdx",slug:"/entities/active",permalink:"/akita/docs/entities/active",editUrl:"https://github.com/datorama/akita/edit/master/docs/docs/entities/active.mdx",version:"current",sidebar:"docs",previous:{title:"Query Entity",permalink:"/akita/docs/entities/query-entity"},next:{title:"Sorting",permalink:"/akita/docs/entities/sorting"}},l=[{value:"API",id:"api",children:[{value:"<code>setActive</code>",id:"setactive",children:[]},{value:"<code>updateActive</code>",id:"updateactive",children:[]},{value:"<code>selectActiveId</code>",id:"selectactiveid",children:[]},{value:"<code>selectActive</code>",id:"selectactive",children:[]},{value:"<code>getActiveId</code>",id:"getactiveid",children:[]},{value:"<code>getActive</code>",id:"getactive",children:[]},{value:"<code>hasActive</code>",id:"hasactive",children:[]}]},{value:"Multiple Active Entities",id:"multiple-active-entities",children:[{value:"<code>setActive</code>",id:"setactive-1",children:[]},{value:"<code>addActive</code>",id:"addactive",children:[]},{value:"<code>removeActive</code>",id:"removeactive",children:[]},{value:"<code>toggleActive</code>",id:"toggleactive",children:[]}]}],s={rightToc:l};function b(e){var t=e.components,n=Object(i.a)(e,["components"]);return Object(c.b)("wrapper",Object(a.a)({},s,n,{components:t,mdxType:"MDXLayout"}),Object(c.b)("p",null,"The store supports having an ",Object(c.b)("inlineCode",{parentName:"p"},"active")," property, holding the active entity's ",Object(c.b)("inlineCode",{parentName:"p"},"id"),". This can prove to be very useful in cases where you want to interact with the entity that is currently active."),Object(c.b)("p",null,"Here's how to set it up:"),Object(c.b)("pre",null,Object(c.b)("code",Object(a.a)({parentName:"pre"},{className:"language-ts",metastring:'{3} title="todos.store.ts"',"{3}":!0,title:'"todos.store.ts"'}),"import { EntityState, ActiveState, StoreConfig, EntityStore } from '@datorama/akita';\n\nexport interface TodosState extends EntityState<Todo, number>, ActiveState {}\n\n@StoreConfig({ name: 'todos' })\nexport class TodosStore extends EntityStore<TodosState> {\n  constructor() {\n    super();\n  }\n}\n")),Object(c.b)("div",{className:"admonition admonition-tip alert alert--success"},Object(c.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-heading"}),Object(c.b)("h5",{parentName:"div"},Object(c.b)("span",Object(a.a)({parentName:"h5"},{className:"admonition-icon"}),Object(c.b)("svg",Object(a.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"}),Object(c.b)("path",Object(a.a)({parentName:"svg"},{fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"})))),"tip")),Object(c.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-content"}),Object(c.b)("p",{parentName:"div"},'You can use the store or feature schematics with the flag --withActive="Active" to generate a store which ActiveState.'))),Object(c.b)("p",null,"The Store provides the following methods to update and query the ",Object(c.b)("inlineCode",{parentName:"p"},"active")," state:"),Object(c.b)("h2",{id:"api"},"API"),Object(c.b)("h3",{id:"setactive"},Object(c.b)("inlineCode",{parentName:"h3"},"setActive")),Object(c.b)("p",null,"Set the given entity ",Object(c.b)("inlineCode",{parentName:"p"},"id")," as active:"),Object(c.b)("pre",null,Object(c.b)("code",Object(a.a)({parentName:"pre"},{className:"language-ts"}),"store.setActive(entityId);\nstore.setActive(null);\n")),Object(c.b)("h3",{id:"updateactive"},Object(c.b)("inlineCode",{parentName:"h3"},"updateActive")),Object(c.b)("p",null,"Update the active entity:"),Object(c.b)("pre",null,Object(c.b)("code",Object(a.a)({parentName:"pre"},{className:"language-ts"}),"store.updateActive({ name: newName });\n\nstore.updateActive((active) => {\n  return {\n    config: {\n      ...active.config,\n      date,\n    },\n  };\n});\n")),Object(c.b)("p",null,"It\u2019s possible to set the ",Object(c.b)("inlineCode",{parentName:"p"},"next")," or ",Object(c.b)("inlineCode",{parentName:"p"},"previous")," entity as ",Object(c.b)("inlineCode",{parentName:"p"},"active"),". For example:"),Object(c.b)("pre",null,Object(c.b)("code",Object(a.a)({parentName:"pre"},{className:"language-ts"}),"store.setActive({ prev: true });\nstore.setActive({ next: true });\n")),Object(c.b)("p",null,"By default, if the active entity is the last one and you select to activate the next entity, it will loop to the beginning and make the first one active. If you want to disable this behavior set the ",Object(c.b)("inlineCode",{parentName:"p"},"wrap")," parameter to ",Object(c.b)("inlineCode",{parentName:"p"},"false"),":"),Object(c.b)("pre",null,Object(c.b)("code",Object(a.a)({parentName:"pre"},{className:"language-ts"}),"store.setActive({ next: true, wrap: false });\n")),Object(c.b)("h3",{id:"selectactiveid"},Object(c.b)("inlineCode",{parentName:"h3"},"selectActiveId")),Object(c.b)("p",null,"Select the ",Object(c.b)("inlineCode",{parentName:"p"},"active")," entity's ",Object(c.b)("inlineCode",{parentName:"p"},"id"),":"),Object(c.b)("pre",null,Object(c.b)("code",Object(a.a)({parentName:"pre"},{className:"language-ts"}),"activeId$ = query.selectActiveId();\n")),Object(c.b)("h3",{id:"selectactive"},Object(c.b)("inlineCode",{parentName:"h3"},"selectActive")),Object(c.b)("p",null,"Select the ",Object(c.b)("inlineCode",{parentName:"p"},"active")," entity: (don't forget to use the ",Object(c.b)("inlineCode",{parentName:"p"},"ActiveState")," interface in your store's state)"),Object(c.b)("pre",null,Object(c.b)("code",Object(a.a)({parentName:"pre"},{className:"language-ts"}),"activeEntity$ = query.selectActive();\nactiveTitle$ = query.selectActive(({ title }) => title);\n")),Object(c.b)("h3",{id:"getactiveid"},Object(c.b)("inlineCode",{parentName:"h3"},"getActiveId")),Object(c.b)("p",null,"Get the ",Object(c.b)("inlineCode",{parentName:"p"},"active")," entity ",Object(c.b)("inlineCode",{parentName:"p"},"id"),":"),Object(c.b)("pre",null,Object(c.b)("code",Object(a.a)({parentName:"pre"},{className:"language-ts"}),"const activeId = query.getActiveId();\n")),Object(c.b)("h3",{id:"getactive"},Object(c.b)("inlineCode",{parentName:"h3"},"getActive")),Object(c.b)("p",null,"Get the ",Object(c.b)("inlineCode",{parentName:"p"},"active")," entity:"),Object(c.b)("pre",null,Object(c.b)("code",Object(a.a)({parentName:"pre"},{className:"language-ts"}),"const active = query.getActive();\n")),Object(c.b)("h3",{id:"hasactive"},Object(c.b)("inlineCode",{parentName:"h3"},"hasActive")),Object(c.b)("p",null,"Whether an active entity is set:"),Object(c.b)("pre",null,Object(c.b)("code",Object(a.a)({parentName:"pre"},{className:"language-ts"}),"if (this.query.hasActive()) {\n}\nif (this.query.hasActive(id)) {\n}\n")),Object(c.b)("h2",{id:"multiple-active-entities"},"Multiple Active Entities"),Object(c.b)("p",null,"In addition to having one active entity, there are times when we need to manage multiple active entities. Here is how to do it with Akita:"),Object(c.b)("pre",null,Object(c.b)("code",Object(a.a)({parentName:"pre"},{className:"language-ts",metastring:'{3} title="todos.store.ts"',"{3}":!0,title:'"todos.store.ts"'}),"import { EntityState, MultiActiveState, StoreConfig } from '@datorama/akita';\n\nexport interface TodosState extends EntityState<Todo, number>, MultiActiveState {}\n\nconst initialState = {\n  active: [],\n};\n\n@StoreConfig({ name: 'todos' })\nexport class TodosStore extends EntityStore<TodosState> {\n  constructor() {\n    super(initialState);\n  }\n}\n")),Object(c.b)("p",null,"Unlike working with a single active entity, we've added the ",Object(c.b)("inlineCode",{parentName:"p"},"MultiActiveState")," interface and set the initial state of the ",Object(c.b)("inlineCode",{parentName:"p"},"active")," property to an empty array."),Object(c.b)("div",{className:"admonition admonition-tip alert alert--success"},Object(c.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-heading"}),Object(c.b)("h5",{parentName:"div"},Object(c.b)("span",Object(a.a)({parentName:"h5"},{className:"admonition-icon"}),Object(c.b)("svg",Object(a.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"}),Object(c.b)("path",Object(a.a)({parentName:"svg"},{fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"})))),"tip")),Object(c.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-content"}),Object(c.b)("p",{parentName:"div"},'You can use the store or feature schematics with the flag --withActive="MultiActive" to generate a store which ActiveState.'))),Object(c.b)("p",null,"In addition to the methods of working with a single active entity, we will also receive the following methods:"),Object(c.b)("h3",{id:"setactive-1"},Object(c.b)("inlineCode",{parentName:"h3"},"setActive")),Object(c.b)("pre",null,Object(c.b)("code",Object(a.a)({parentName:"pre"},{className:"language-ts"}),"store.setActive([id, id, id]);\n")),Object(c.b)("h3",{id:"addactive"},Object(c.b)("inlineCode",{parentName:"h3"},"addActive")),Object(c.b)("pre",null,Object(c.b)("code",Object(a.a)({parentName:"pre"},{className:"language-ts"}),"store.addActive(id);\n")),Object(c.b)("h3",{id:"removeactive"},Object(c.b)("inlineCode",{parentName:"h3"},"removeActive")),Object(c.b)("pre",null,Object(c.b)("code",Object(a.a)({parentName:"pre"},{className:"language-ts"}),"store.removeActive(id);\n")),Object(c.b)("h3",{id:"toggleactive"},Object(c.b)("inlineCode",{parentName:"h3"},"toggleActive")),Object(c.b)("pre",null,Object(c.b)("code",Object(a.a)({parentName:"pre"},{className:"language-ts"}),"store.toggleActive(id);\n")))}b.isMDXComponent=!0}}]);